# Users Integration - Visual Flow Diagrams

## ğŸ”„ Complete Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         REGISTRATION FLOW                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User                    Frontend                    Backend              Email
  â”‚                        â”‚                          â”‚                   â”‚
  â”œâ”€â”€(1)Fill Formâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”œâ”€â”€(2)Validate Form        â”‚                   â”‚
  â”‚                        â”‚   (password2 match)      â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”œâ”€â”€(3)POST /register/â”€â”€â”€â”€>â”‚                   â”‚
  â”‚                        â”‚   {form data}            â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”œâ”€â”€(4)Validate     â”‚
  â”‚                        â”‚                          â”‚   Fields          â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”œâ”€â”€(5)Create User  â”‚
  â”‚                        â”‚                          â”‚   (is_active=F)   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”œâ”€â”€(6)Send Emailâ”€â”€>â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚<â”€(7)Success Responseâ”€â”€â”€â”€â”¤                   â”‚
  â”‚                        â”‚   {status, message}      â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚<â”€(8)Show Successâ”€â”€â”€â”€â”€â”€â”¤                          â”‚                   â”‚
  â”‚   Message & Redirect   â”‚                          â”‚                   â”‚
  â”‚   to Login (3s)        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€(9)Email Receivedâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚   "Click to verify"    â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”œâ”€â”€(10)Click Linkâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
  â”‚   /verify/:uid/:token  â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”œâ”€â”€(11)Verify      â”‚
  â”‚                        â”‚                          â”‚   Token           â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”œâ”€â”€(12)Activate    â”‚
  â”‚                        â”‚                          â”‚   (is_active=T)   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚<â”€â”€(13)"Email Verified!"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            LOGIN FLOW                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User                    Frontend                    Backend          
  â”‚                        â”‚                          â”‚               
  â”œâ”€â”€(1)Enter Credentials>â”‚                          â”‚               
  â”‚   email, password      â”‚                          â”‚               
  â”‚                        â”‚                          â”‚               
  â”‚                        â”œâ”€â”€(2)POST /login/â”€â”€â”€â”€â”€â”€â”€>â”‚               
  â”‚                        â”‚   {email, password}      â”‚               
  â”‚                        â”‚                          â”‚               
  â”‚                        â”‚                          â”œâ”€â”€(3)Validate 
  â”‚                        â”‚                          â”‚   Credentials 
  â”‚                        â”‚                          â”‚               
  â”‚                        â”‚                          â”œâ”€â”€(4)Generate 
  â”‚                        â”‚                          â”‚   JWT Tokens  
  â”‚                        â”‚                          â”‚               
  â”‚                        â”‚<â”€(5)Return Tokensâ”€â”€â”€â”€â”€â”€â”€â”¤               
  â”‚                        â”‚   {access, refresh}      â”‚               
  â”‚                        â”‚                          â”‚               
  â”‚                        â”œâ”€â”€(6)Store Tokens        â”‚               
  â”‚                        â”‚   localStorage           â”‚               
  â”‚                        â”‚                          â”‚               
  â”‚                        â”œâ”€â”€(7)GET /profile/â”€â”€â”€â”€â”€â”€>â”‚               
  â”‚                        â”‚   (with access token)    â”‚               
  â”‚                        â”‚                          â”‚               
  â”‚                        â”‚<â”€(8)User Dataâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               
  â”‚                        â”‚   {id, name, role...}    â”‚               
  â”‚                        â”‚                          â”‚               
  â”‚                        â”œâ”€â”€(9)Store User Data     â”‚               
  â”‚                        â”‚   localStorage           â”‚               
  â”‚                        â”‚                          â”‚               
  â”‚<â”€(10)Redirectâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                          â”‚               
  â”‚   Based on Role        â”‚                          â”‚               
  â”‚   /student/dashboard   â”‚                          â”‚               
  â”‚   or /owner/dashboard  â”‚                          â”‚               
  â”‚                        â”‚                          â”‚               


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TOKEN REFRESH FLOW                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Action            Frontend (Axios)              Backend          
     â”‚                        â”‚                          â”‚               
     â”œâ”€â”€(1)Make API Callâ”€â”€â”€â”€>â”‚                          â”‚               
     â”‚                        â”‚                          â”‚               
     â”‚                        â”œâ”€â”€(2)Add Access Token    â”‚               
     â”‚                        â”‚   in Header              â”‚               
     â”‚                        â”‚                          â”‚               
     â”‚                        â”œâ”€â”€(3)Send Requestâ”€â”€â”€â”€â”€â”€â”€>â”‚               
     â”‚                        â”‚                          â”‚               
     â”‚                        â”‚                          â”œâ”€â”€(4)Validate 
     â”‚                        â”‚                          â”‚   Token       
     â”‚                        â”‚                          â”‚               
     â”‚                        â”‚<â”€(5)401 Unauthorizedâ”€â”€â”€â”€â”¤               
     â”‚                        â”‚   (Token Expired)        â”‚               
     â”‚                        â”‚                          â”‚               
     â”‚                        â”œâ”€â”€(6)Interceptor Catches â”‚               
     â”‚                        â”‚   Error                  â”‚               
     â”‚                        â”‚                          â”‚               
     â”‚                        â”œâ”€â”€(7)POST /refresh/â”€â”€â”€â”€â”€>â”‚               
     â”‚                        â”‚   {refresh: token}       â”‚               
     â”‚                        â”‚                          â”‚               
     â”‚                        â”‚                          â”œâ”€â”€(8)Validate 
     â”‚                        â”‚                          â”‚   Refresh     
     â”‚                        â”‚                          â”‚               
     â”‚                        â”‚<â”€(9)New Access Tokenâ”€â”€â”€â”€â”¤               
     â”‚                        â”‚   {access}               â”‚               
     â”‚                        â”‚                          â”‚               
     â”‚                        â”œâ”€â”€(10)Store New Token    â”‚               
     â”‚                        â”‚   localStorage           â”‚               
     â”‚                        â”‚                          â”‚               
     â”‚                        â”œâ”€â”€(11)Retry Originalâ”€â”€â”€â”€â”€>â”‚               
     â”‚                        â”‚   Request with New Token â”‚               
     â”‚                        â”‚                          â”‚               
     â”‚                        â”‚<â”€(12)Success Responseâ”€â”€â”€â”¤               
     â”‚<â”€(13)Data Receivedâ”€â”€â”€â”€â”¤                          â”‚               
     â”‚                        â”‚                          â”‚               
                                                                        
  IF Refresh Fails:                                                    
     â”‚                        â”‚                          â”‚               
     â”‚                        â”‚<â”€X Error â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               
     â”‚                        â”‚                          â”‚               
     â”‚                        â”œâ”€â”€Clear All Tokens       â”‚               
     â”‚                        â”‚   & User Data            â”‚               
     â”‚                        â”‚                          â”‚               
     â”‚<â”€Redirect to Loginâ”€â”€â”€â”€â”¤                          â”‚               
     â”‚                        â”‚                          â”‚               


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PASSWORD RESET FLOW                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User                    Frontend                    Backend            Email
  â”‚                        â”‚                          â”‚                   â”‚
  â”œâ”€â”€(1)Click Forgotâ”€â”€â”€â”€â”€â”€>â”‚                          â”‚                   â”‚
  â”‚   Password Link        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”œâ”€â”€Navigate to            â”‚                   â”‚
  â”‚                        â”‚  /forgot-password        â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”œâ”€â”€(2)Enter Emailâ”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”œâ”€â”€(3)POST /reset-pwd/â”€â”€â”€>â”‚                   â”‚
  â”‚                        â”‚   {email}                â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”œâ”€â”€(4)Find User    â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”œâ”€â”€(5)Generate     â”‚
  â”‚                        â”‚                          â”‚   Reset Token     â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”œâ”€â”€(6)Send Emailâ”€â”€>â”‚
  â”‚                        â”‚                          â”‚   with Link       â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚<â”€(7)Success Messageâ”€â”€â”€â”€â”€â”¤                   â”‚
  â”‚<â”€(8)Show Successâ”€â”€â”€â”€â”€â”€â”¤                          â”‚                   â”‚
  â”‚   "Check your email"   â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€(9)Email Receivedâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚   "Click to reset"     â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”œâ”€â”€(10)Click Linkâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
  â”‚   /reset-pwd/:uid/:tkn â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”œâ”€â”€Page Loads with        â”‚                   â”‚
  â”‚                        â”‚  uid & token             â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”œâ”€â”€(11)Enter Newâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚                          â”‚                   â”‚
  â”‚   Password             â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”œâ”€â”€(12)POST Resetâ”€â”€â”€â”€â”€â”€â”€â”€>â”‚                   â”‚
  â”‚                        â”‚   {new_pwd, confirm,     â”‚                   â”‚
  â”‚                        â”‚    token, uid}           â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”œâ”€â”€(13)Validate    â”‚
  â”‚                        â”‚                          â”‚   Token           â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”œâ”€â”€(14)Update      â”‚
  â”‚                        â”‚                          â”‚   Password        â”‚
  â”‚                        â”‚                          â”‚                   â”‚
  â”‚                        â”‚<â”€(15)Successâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                   â”‚
  â”‚<â”€(16)Show Successâ”€â”€â”€â”€â”€â”¤                          â”‚                   â”‚
  â”‚   & Redirect to Login  â”‚                          â”‚                   â”‚
  â”‚   (3s)                 â”‚                          â”‚                   â”‚
  â”‚                        â”‚                          â”‚                   â”‚
```

## ğŸ—ï¸ Component Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          APP STRUCTURE                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                            App.js
                               â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚              â”‚              â”‚
           HomePage        LoginPage      SignupPage
                â”‚              â”‚              â”‚
                â”‚              â”œâ”€â”€LoginForm   â”œâ”€â”€SignupForm
                â”‚              â”œâ”€â”€LoginHeader â”œâ”€â”€SignupHeader
                â”‚              â””â”€â”€LoginFooter â””â”€â”€SignupFooter
                â”‚
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                              â”‚
         ProtectedRoute              ProtectedRoute
         (Student)                   (Owner)
                â”‚                              â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚            â”‚                â”‚
  StudentDashboard  Bookings  OwnerDashboard  ManageHostels
                                               
                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                               â”‚
         ProtectedRoute                  ForgotPasswordPage
         (Any User)                              â”‚
                â”‚                      ResetPasswordPage
         HostelLayout
                â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”
         â”‚             â”‚      â”‚      â”‚      â”‚
    Dashboard    Hostels Rooms Profile Reviews
                                â”‚
                                â”œâ”€â”€ChangePasswordModal
                                â””â”€â”€ProfilePictureUpload


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        API LAYER STRUCTURE                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                         api/index.js
                        (Axios Instance)
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                     â”‚
            Request Interceptor   Response Interceptor
                    â”‚                     â”‚
              Add JWT Token      Handle 401 & Refresh
                    â”‚                     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                          api/users.js
                      (Endpoint Functions)
                               â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                    â”‚                    â”‚
    registerUser         loginUser          getUserProfile
    refreshToken      updateUserProfile    changePassword
                     requestPasswordReset
                               â”‚
                               â”‚
                    services/userServices.js
                    (Business Logic Layer)
                               â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                    â”‚                    â”‚
    handleRegister      handleLogin         fetchUserProfile
    handleLogout       updateProfile       handleChangePassword
                    uploadProfilePicture
                               â”‚
                               â”‚
                          Components
                      (Use userServices)
```

## ğŸ“Š Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROFILE UPDATE FLOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Profile Component                                              Backend
       â”‚                                                          â”‚
       â”œâ”€â”€(1) componentDidMount                                  â”‚
       â”‚                                                          â”‚
       â”œâ”€â”€(2) Call fetchUserProfile()                            â”‚
       â”‚          â”‚                                               â”‚
       â”‚          â””â”€â”€GET /api/users/profile/â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
       â”‚                                                          â”‚
       â”‚                                     (3) Return User Data â”‚
       â”‚          â”Œâ”€â”€{profile data}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
       â”‚          â”‚                                               â”‚
       â”œâ”€â”€(4) setFormData(profile)                               â”‚
       â”‚     Show in Form                                         â”‚
       â”‚                                                          â”‚
       â”‚                                                          â”‚
User Edits Name & Phone                                          â”‚
       â”‚                                                          â”‚
       â”œâ”€â”€(5) User clicks "Save"                                 â”‚
       â”‚                                                          â”‚
       â”œâ”€â”€(6) handleSubmit()                                     â”‚
       â”‚          â”‚                                               â”‚
       â”‚          â””â”€â”€PUT /api/users/profile/â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>  â”‚
       â”‚             {first_name, last_name, phone, city}        â”‚
       â”‚                                                          â”‚
       â”‚                                          (7) Validate    â”‚
       â”‚                                          (8) Update DB   â”‚
       â”‚                                          (9) Return Data â”‚
       â”‚          â”Œâ”€â”€{updated profile}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
       â”‚          â”‚                                               â”‚
       â”œâ”€â”€(10) Update localStorage("user", data)                 â”‚
       â”‚                                                          â”‚
       â”œâ”€â”€(11) setMessage("Success!")                            â”‚
       â”‚                                                          â”‚
       â””â”€â”€(12) User sees success message                         â”‚


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PROFILE PICTURE UPLOAD FLOW                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Profile Component                Backend              Cloudinary
       â”‚                            â”‚                      â”‚
       â”œâ”€â”€(1) User selects file     â”‚                      â”‚
       â”‚                            â”‚                      â”‚
       â”œâ”€â”€(2) Validate file         â”‚                      â”‚
       â”‚     (size, type)           â”‚                      â”‚
       â”‚                            â”‚                      â”‚
       â”œâ”€â”€(3) uploadProfilePicture()â”‚                      â”‚
       â”‚          â”‚                 â”‚                      â”‚
       â”‚          â””â”€â”€FormDataâ”€â”€â”€â”€>  â”‚                      â”‚
       â”‚             {profile_pic}  â”‚                      â”‚
       â”‚                            â”‚                      â”‚
       â”‚                            â”œâ”€â”€(4) Uploadâ”€â”€â”€â”€â”€â”€>   â”‚
       â”‚                            â”‚                      â”‚
       â”‚                            â”‚   (5) Store Image    â”‚
       â”‚                            â”‚   (6) Return URL     â”‚
       â”‚                            â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚
       â”‚                            â”‚                      â”‚
       â”‚                            â”œâ”€â”€(7) Save public_id  â”‚
       â”‚                            â”‚   to DB              â”‚
       â”‚                            â”‚                      â”‚
       â”‚          â”Œâ”€â”€{profile_pic   â”‚                      â”‚
       â”‚          â”‚   _url}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                      â”‚
       â”‚          â”‚                 â”‚                      â”‚
       â”œâ”€â”€(8) Update state          â”‚                      â”‚
       â”‚     with new URL           â”‚                      â”‚
       â”‚                            â”‚                      â”‚
       â””â”€â”€(9) Display new image     â”‚                      â”‚
```

## ğŸ” Security Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      JWT TOKEN SECURITY                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                        User Logs In
                             â”‚
                             â–¼
                    Backend Generates:
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Access Token   â”‚  (60 min lifetime)
                    â”‚  Refresh Token  â”‚  (7 days lifetime)
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                    Frontend Stores:
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ localStorage:           â”‚
                    â”‚  - accessToken          â”‚
                    â”‚  - refreshToken         â”‚
                    â”‚  - user (non-sensitive) â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â–¼                    â–¼                    â–¼
   API Request 1        API Request 2        API Request 3
        â”‚                    â”‚                    â”‚
    Add Token            Add Token            Add Token
    in Header            in Header            in Header
        â”‚                    â”‚                    â”‚
        â–¼                    â–¼                    â–¼
  âœ… Valid            âŒ Expired             âœ… Valid
  Return Data         Auto Refresh          Return Data
                      & Retry


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ROUTE PROTECTION                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

        User tries to access /student/dashboard
                      â”‚
                      â–¼
              ProtectedRoute Checks:
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 1. Has Token?    â”‚â”€â”€Noâ”€â”€> Redirect to /login
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ Yes
                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ 2. Correct Role? â”‚â”€â”€Noâ”€â”€> Redirect to /
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ Yes
                      â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Render Component â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± User Journey Map

```
NEW USER JOURNEY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Start â†’ /signup â†’ Fill Form â†’ Register â†’ Check Email â†’ Verify â†’ /login â†’ Login â†’ Dashboard


RETURNING USER JOURNEY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Start â†’ /login â†’ Enter Creds â†’ Login â†’ Dashboard â†’ Profile â†’ Edit â†’ Save â†’ Success


FORGOT PASSWORD JOURNEY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Start â†’ /login â†’ "Forgot?" â†’ /forgot-password â†’ Enter Email â†’ Check Email
                                   â†“
           /reset-password/:uid/:token â† Click Link â† Email
                                   â†“
                              New Password
                                   â†“
                               /login (redirect)
                                   â†“
                              Login â†’ Dashboard


ROLE-BASED NAVIGATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Student Login â†’ /student/dashboard
              â†’ /student/bookings
              â†’ /hostel/profile

Owner Login   â†’ /owner/dashboard
              â†’ /owner/hostels
              â†’ /hostel/profile
```

## ğŸ¯ Error Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ERROR HANDLING CASCADE                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    API Request Made
                           â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                     â”‚
             Success               Error
                â”‚                     â”‚
        Return Data          Check Error Type
                                     â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                â”‚                â”‚
              Network Error    Validation Error   Auth Error
                    â”‚                â”‚                â”‚
             Show Generic    Show Field Errors   Check if 401
             "Network          Next to Fields         â”‚
              Error"                              â”Œâ”€â”€â”€â”´â”€â”€â”€â”
                                                  â”‚       â”‚
                                             First   Retry After
                                              Try    Refresh
                                                  â”‚       â”‚
                                              Refresh  Logout
                                               Token  & Redirect
                                                  â”‚   to /login
                                           Try Original
                                            Request
                                              Again
```

This visual documentation should help you understand how all the pieces fit together! ğŸ“Šâœ¨

